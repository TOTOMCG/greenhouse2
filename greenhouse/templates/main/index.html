{% extends 'layout/layout.html' %}
{% load static %}

<!-- Control panel -->
{% block control-panel %}
<div class="tab-information">
  <h1 class="tab-information__heading">Панель управления</h1>
</div>

<div class="panel__block-content">

  <!-- Soil humidity -->
  <div class="block">
    <div class="block-top">
      <div class="block-top__header block-top__header_place_between">
        <div class="line__first-block">
          <div class="block__icon block__icon_place_soil-humidity"></div>
          <h2 class="block__name">Влажность почвы</h2>
        </div>
        <h2 class="block__name">%</h2>
      </div>
      <ul class="block__list">
        <li class="block__line">
          <div class="line__first-block">
            <h3 class="line__name">Бороздка 1:</h3>
            <p class="line__watering">Полив:</p>
            <div class="switcher-block">
              <label class="switch">
                <input class="checkbox" id="watering_1_checkbox" type="checkbox" name="watering-1" {% if watering_1 %} checked{% endif %}>
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <p class="line__meaning" id="soil-hum__1"></p>
        </li>
        <li class="block__line">
          <div class="line__first-block">
            <h3 class="line__name">Бороздка 2:</h3>
            <p class="line__watering">Полив:</p>
            <div class="switcher-block">
              <label class="switch">
                <input class="checkbox" id="watering_2_checkbox" type="checkbox" name="watering-2" {% if watering_2 %} checked{% endif %}>
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <p class="line__meaning" id="soil-hum__2"></p>
        </li>
        <li class="block__line">
          <div class="line__first-block">
            <h3 class="line__name">Бороздка 3:</h3>
            <p class="line__watering">Полив:</p>
            <div class="switcher-block">
              <label class="switch">
                <input class="checkbox" id="watering_3_checkbox" type="checkbox" name="watering-3" {% if watering_3 %} checked{% endif %}>
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <p class="line__meaning" id="soil-hum__3"></p>
        </li>
        <li class="block__line">
          <div class="line__first-block">
            <h3 class="line__name">Бороздка 4:</h3>
            <p class="line__watering">Полив:</p>
            <div class="switcher-block">
              <label class="switch">
                <input class="checkbox" id="watering_4_checkbox" type="checkbox" name="watering-4" {% if watering_4 %} checked{% endif %}>
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <p class="line__meaning" id="soil-hum__4"></p>
        </li>
        <li class="block__line">
          <div class="line__first-block">
            <h3 class="line__name">Бороздка 5:</h3>
            <p class="line__watering">Полив:</p>
            <div class="switcher-block">
              <label class="switch">
                <input class="checkbox" id="watering_5_checkbox" type="checkbox" name="watering-5" {% if watering_5 %} checked{% endif %}>
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <p class="line__meaning" id="soil-hum__5"></p>
        </li>
        <li class="block__line">
          <div class="line__first-block">
            <h3 class="line__name">Бороздка 6:</h3>
            <p class="line__watering">Полив:</p>
            <div class="switcher-block">
              <label class="switch">
                <input class="checkbox" id="watering_6_checkbox" type="checkbox" name="watering-6" {% if watering_6 %} checked{% endif %}>
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <p class="line__meaning" id="soil-hum__6"></p>
        </li>
      </ul>
    </div>
    <div class="block-bottom">
      <div class="block-bottom__header block-bottom__header_place_wind">
        <div class="line__first-block">
          <div class="block__icon block__icon_place_warning"></div>
          <h2 class="block__name">Экстренный режим</h2>
        </div>
        <div class="switcher-block">
          <label class="switch">
            <input class="extra_mode_checkbox" type="checkbox" id="extra_mode_checkbox">
            <span class="slider round"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Air humidity  -->
  <div class="block">
    <div class="block-top">
      <div class="block-top__header block-top__header_place_between">
        <div class="line__first-block">
          <div class="block__icon block__icon_place_air-humidity"></div>
          <h2 class="block__name">Влажность воздуха</h2>
        </div>
        <h2 class="block__name">%</h2>
      </div>
      <div class="block__average-value">
        <p class="block__average-value__text">Среднее значение:</p>
        <p class="block__average-value__meaning" id="air-hum__avg"></p>
      </div>
      <ul class="block__list">
        <li class="block__line">
          <h3 class="line__name">Датчик 1:</h3>
          <p class="line__meaning" id="air-hum__1"></p>
        </li>
        <li class="block__line">
          <h3 class="line__name">Датчик 2:</h3>
          <p class="line__meaning" id="air-hum__2"></p>
        </li>
        <li class="block__line">
          <h3 class="line__name">Датчик 3:</h3>
          <p class="line__meaning" id="air-hum__3"></p>
        </li>
        <li class="block__line">
          <h3 class="line__name">Датчик 4:</h3>
          <p class="line__meaning" id="air-hum__4"></p>
        </li>
      </ul>
    </div>
    <div class="block-bottom">
      <div class="block-bottom__header block-bottom__header_place_watering">
        <div class="line__first-block">
          <div class="block__icon  block__icon_place_watering"></div>
          <h2 class="block__name">Увлажнение воздуха</h2>
        </div>
        <div class="switcher-block">
          <label class="switch">
            <input class="checkbox" type="checkbox" name="total_hum-1" {% if total_hum_1 %} checked{% endif %}
                   id="total_hum_checkbox">
            <span class="slider round"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Temperature -->
  <div class="block">
    <div class="block-top">
      <div class="block-top__header block-top__header_place_between">
        <div class="line__first-block">
          <div class="block__icon block__icon_place_temperature"></div>
          <h2 class="block__name">Температура</h2>
        </div>
        <h2 class="block__name">&deg;С</h2>
      </div>
      <div class="block__average-value">
        <p class="block__average-value__text">Среднее значение:</p>
        <p class="block__average-value__meaning" id="temp__avg"></p>
      </div>
      <ul class="block__list">
        <li class="block__line">
          <h3 class="line__name">Датчик 1:</h3>
          <p class="line__meaning" id="temp__1"></p>
        </li>
        <li class="block__line">
          <h3 class="line__name">Датчик 2:</h3>
          <p class="line__meaning" id="temp__2"></p>
        </li>
        <li class="block__line">
          <h3 class="line__name">Датчик 3:</h3>
          <p class="line__meaning" id="temp__3"></p>
        </li>
        <li class="block__line">
          <h3 class="line__name">Датчик 4:</h3>
          <p class="line__meaning" id="temp__4"></p>
        </li>
      </ul>
    </div>
    <div class="block-bottom">
      <div class="block-bottom__header block-bottom__header_place_wind">
        <div class="line__first-block">
          <div class="block__icon block__icon_place_wind"></div>
          <h2 class="block__name">Проветривание</h2>
        </div>
        <div class="switcher-block">
          <label class="switch">
            <input class="checkbox" type="checkbox" name="fork_drive-1" {% if fork_drive_1 %} checked{% endif %}
                   id="fork_drive_checkbox">
            <span class="slider round"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Emergency mode -->
  <div class="block">
  </div>

</div>
{% endblock control-panel %}

<!-- Charts panel -->
{% block charts-panel %}
<div class="tab-information">
  <h1 class="tab-information__heading">Графики</h1>
  <select class="select-chart" name="chartselect" title="Выбор графика" id="select-chart">
    <option class="select-chart__option" value="1" selected>Температура</option>
    <option class="select-chart__option" value="2">Средняя температура</option>
    <option class="select-chart__option" value="3">Влажность воздуха</option>
    <option class="select-chart__option" value="4">Средняя влажность воздуха</option>
    <option class="select-chart__option" value="5">Влажность почвы</option>
    <option class="select-chart__option" value="6">Состояние форточек</option>
    <option class="select-chart__option" value="7">Состояние полива</option>
    <option class="select-chart__option" value="8">Состояние увлажнения теплицы</option>
  </select>
</div>

<div class="panel__block-content">
  <div class="block block_content_chart">
    <div class="block-top block-top_place_charts">
      <div class="chart-block">
        <div id="temp_chart"></div>
      </div>
      <div class="chart-block">
        <div id="avg_temp_chart"></div>
      </div>
      <div class="chart-block">
        <div id="air_hum_chart"></div>
      </div>
      <div class="chart-block">
        <div id="avg_air_hum_chart"></div>
      </div>
      <div class="chart-block">
        <div id="soil_hum_chart"></div>
      </div>
      <div class="chart-block">
        <div id="fork_drive_chart"></div>
      </div>
      <div class="chart-block">
        <div id="watering_chart"></div>
      </div>
      <div class="chart-block">
        <div id="total_hum_chart"></div>
      </div>
    </div>
  </div>
</div>
{% endblock charts-panel %}

<!-- Database panel -->
{% block database-panel %}
<div class="tab-information">
  <h1 class="tab-information__heading">Таблица</h1>
</div>
<div class="panel__block-content">
  <div class="block block_place_table">
    <div class="block-top" style="height:450px;">
      <div id='table'></div>
      <script>
        var table = new Tabulator("#table", {
          data: {{data|safe}},
          layout:"fitDataTable",
          height: 432,
          columnHeaderVertAlign:"bottom",
          columns:[
            {title:"Время",field:"Время",resizable:false,frozen:true,hozAlign:"right"},
            {title:"Датчик температуры",
              columns:[
                {title:"1",field:"Температура 1", hozAlign:"right", width:75,resizable:false},
                {title:"2",field:"Температура 2", hozAlign:"right", width:75,resizable:false},
                {title:"3",field:"Температура 3", hozAlign:"right", width:75,resizable:false},
                {title:"4",field:"Температура 4", hozAlign:"right", width:75,resizable:false}
              ],headerHozAlign:"center",
            },
            {title:"Датчик влажности воздуха",
              columns:[
                {title:"1",field:"Влажность воздуха 1", hozAlign:"right", width:75,resizable:false},
                {title:"2",field:"Влажность воздуха 2", hozAlign:"right", width:75,resizable:false},
                {title:"3",field:"Влажность воздуха 3", hozAlign:"right", width:75,resizable:false},
                {title:"4",field:"Влажность воздуха 4", hozAlign:"right", width:75,resizable:false}
              ], headerHozAlign:"center",
            },
            {title:"Датчик влажности почвы",
              columns:[
                {title:"1",field:"Влажность почвы 1", hozAlign:"right", width:75,resizable:false},
                {title:"2",field:"Влажность почвы 2", hozAlign:"right", width:75,resizable:false},
                {title:"3",field:"Влажность почвы 3", hozAlign:"right", width:75,resizable:false},
                {title:"4",field:"Влажность почвы 4", hozAlign:"right", width:75,resizable:false},
                {title:"5",field:"Влажность почвы 5", hozAlign:"right", width:75,resizable:false},
                {title:"6",field:"Влажность почвы 6", hozAlign:"right", width:75,resizable:false},
              ],headerHozAlign:"center",
            },
          ],
        });
    </script>
    <style>
      .tabulator {
        font-size: 16px;
        font-family: "Inter", sans-serif;
      }
    </style>
    </div>
  </div>
</div>
<form method="post">
  {% csrf_token %}
  <div class="block block_plus">
    <div class="block-top">
      <div class="block-top__header">
        <div class="block__icon block__icon_place_plus"></div>
        <h2 class="block__name">Добавить запись</h2>
      </div>
      <ul class="block__list">
        <li class="block__line">
          <h3 class="line__name">Датчик</h3>
          <div class="settings-input-block">
            <select class="select-chart" name="deviceselected" title="Выбор датчика" id="select-device">
              <option class="select-device__option" value="temp-1" selected>Температура 1</option>
              <option class="select-device__option" value="temp-2">Температура 2</option>
              <option class="select-device__option" value="temp-3">Температура 3</option>
              <option class="select-device__option" value="temp-4">Температура 4</option>
              <option class="select-device__option" value="air_hum-1">Влажность воздуха 1</option>
              <option class="select-device__option" value="air_hum-2">Влажность воздуха 2</option>
              <option class="select-device__option" value="air_hum-3">Влажность воздуха 3</option>
              <option class="select-device__option" value="air_hum-4">Влажность воздуха 4</option>
              <option class="select-device__option" value="soil_hum-1">Влажность почвы 1</option>
              <option class="select-device__option" value="soil_hum-2">Влажность почвы 2</option>
              <option class="select-device__option" value="soil_hum-3">Влажность почвы 3</option>
              <option class="select-device__option" value="soil_hum-4">Влажность почвы 4</option>
              <option class="select-device__option" value="soil_hum-5">Влажность почвы 5</option>
              <option class="select-device__option" value="soil_hum-6">Влажность почвы 6</option>
            </select>
          </div>
        </li>
        <li class="block__line">
          <h3 class="line__name">Время</h3>
          <div class="settings-input-block">
            <input class="input__plus" name="datetime" type="datetime-local">
          </div>
        </li>
        <li class="block__line">
          <h3 class="line__name">Значение</h3>
          <div class="settings-input-block">
            <input class="input__settings" name="value" type="number">
          </div>
        </li>
        <li class="block__line">
          <input class="save-button" type="submit" value="Добавить"/>
        </li>
      </ul>
    </div>
  </div>
</form>
{% endblock database-panel %}

<!-- Settings panel -->
{% block settings-panel %}
<div class="tab-information">
  <h1 class="tab-information__heading">Настройки</h1>
</div>

<div class="panel__block-content">

  <!-- Settings block -->
  <form method="post">
    {% csrf_token %}
    <div class="block block_place_settings">
      <div class="block-top">
        <div class="block-top__header">
          <div class="block__icon block__icon_place_settings"></div>
          <h2 class="block__name">Параметры</h2>
        </div>
        <ul class="block__list">
          <li class="block__line">
            <h3 class="line__name">Минимальная температура</h3>
            <div class="settings-input-block">
              <input class="input__settings" type="number" name="min_temp" value={{min_temp}}>
              <p class="line__meaning line__meaning_place_settings">&deg;С</p>
            </div>
          </li>
          <li class="block__line">
            <h3 class="line__name">Максимальная влажность воздуха</h3>
            <div class="settings-input-block">
              <input class="input__settings" type="number" name="max_air_hum" value={{max_air_hum}}>
              <p class="line__meaning line__meaning_place_settings">%</p>
            </div>
          </li>
          <li class="block__line">
            <h3 class="line__name">Максимальная влажность почвы</h3>
            <div class="settings-input-block">
              <input class="input__settings" type="number" name="max_soil_hum" value={{max_soil_hum}}>
              <p class="line__meaning line__meaning_place_settings">%</p>
            </div>
          </li>
          <li class="block__line">
            <h3 class="line__name">Токен</h3>
            <div class="settings-input-block">
              <input class="input__settings" type="text" name="token" value={{token}}>
              <p class="line__meaning line__meaning_place_settings"></p>
            </div>
          </li>
          <li class="block__line">
            <input class="save-button" type="submit" value="Сохранить"/>
          </li>
        </ul>
      </div>
    </div>
  </form>

  <!-- Author block -->
  <div class="block">
    <div class="block-top">
      <div class="block-top__header">
        <div class="block__icon block__icon_place_author"></div>
        <h2 class="block__name">Авторы проекта</h2>
      </div>
      <ul class="block__list">
        <li class="block__line">
          <h3 class="line__name">Широков Никита</h3>
        </li>
        <li class="block__line">
          <h3 class="line__name">Богомолов Артем</h3>
        </li>
      </ul>
    </div>
  </div>
</div>
{% endblock settings-panel %}